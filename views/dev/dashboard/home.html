<div ng-init="getTaps()">
  <div class="page-splash-profile">
  </div>
  <!-- <div class="ceiling">

  </div> -->
  <!-- /.row -->

  <!-- /.panel -->
    <div class="dashboard-container">
      <div class="col-lg-8 col-sm-12 " ng-repeat="tap in taps">
        <div class="tap-container col-sm-10 col-sm-offset-1">
          <div class="tap-header col-sm-12">
            <a href="">
              <img class="profile-photo" src="/assets/logo.jpg" alt="Galvanize Logo" />
            </a>

          </div>
            <!-- {{tap.getColor()}} -->

          <div class="tap-body col-sm-12" ng-init="tap.findTimes()">
            <div class="tap-title-container">
              <a ui-sref="dashboard.taps({tapID: tap.id})"<p class="tap-headline-text">{{tap.name}}</p></a>
            </br>
            <p class="tap-headline-text">{{tap.campus}}</p>
            </div>
            <div class="dashboard-content">
              <div class="col-sm-8 time-container" >
                <div ng-repeat="time in tap.times">
                  <div class="time-block time-block-open col-sm-10 col-sm-offset-1">
                    <p class="col-sm-12 time-headline">Opening Time: {{time.openTime}}</p>
                  </div>
                  <div class="time-block time-block-close col-sm-10 col-sm-offset-1">
                    <p class="time-headline">Closing Time: {{time.closeTime}}</p>
                  </div>
                </div>
              </div>

              <div class="keg-level-indicator col-sm-3">
                <div class="keg-cover-container">
                  <div class="keg-fill" ng-style="{height: tap.percentageRemaining() + '%', background: tap.getColor()}"></div>
                  <div class="keg-cover-container">
                    <img class="keg-img" src="assets/keg-cover.png" alt='Keg Cover' />
                  </div>
                </div>

              </div>
            </div>

            <div class="btn-group-container col-sm-12">
              <div class="btn-container col-md-4 col-sm-12">
                <a ui-sref="dashboard.beersearch({tapID: tap.id})" class="btn btn-primary dashboard-btn col-sm-12">Change Keg</a>

                <!-- <a data-toggle="modal" ng-click="toggleModal()" data-target="#keg-search-modal-{{tap.id}}" class="btn btn-primary dashboard-btn col-sm-12">Change Keg</a> -->
              </div>
              <div class="btn-container col-md-4 col-sm-12">
                <a data-toggle="modal" data-target="#schedule-modal-{{tap.id}}" class="btn btn-primary dashboard-btn col-sm-12">Change Schedule</a>
              </div>
              <div class="btn-container col-md-4 col-sm-12">
                <a data-toggle="modal" data-target="#override-confirmation-modal-{{tap.id}}" class="btn btn-primary dashboard-btn col-sm-12">Manual Override</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Keg Search Modal -->

        <div class="modal fade" id="keg-search-modal-{{tap.id}}" tabindex="-1" aria-labeledby="modal-{{tap.id}}-label" aria-hidden="true" style="display:none;" ng-class="{'hidden': !showKegFinderModal}">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="keg-search-modal-{{tap.id}}-label">Change Keg</h4>
              </div>
              <div class="modal-body">
                 <div class="form-group">
                   <label for="">Beer Search</label>
                   <input type="text" class="form-control" id="" placeholder="Search for a Beer" ng-model="beerSearchQuery">
                 </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button"
                data-dismiss="modal" ui-sref="dashboard.beersearch({tapID: tap.id, searchQuery: beerSearchQuery})" class="btn btn-primary" data-dismiss="modal"  ng-click="toggleMOdal()">Search</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="schedule-modal-{{tap.id}}" tabindex="-1" aria-labeledby="schedule-modal-{{tap.id}}-label" aria-hidden="true" style="display:none;">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header modal-override">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal-{{tap.id}}-label">Change Schedule</h4>
              </div>
              <div class="">
                 <div class=" calendar-container">
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Monday')">M</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Tuesday')">Tu</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Wednesday')">W</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Thursday')">Th</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Friday')">F</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Saturday')">Sa</button>
                   <button class="btn btn-primary calendar-btn" ng-click="scheduleFilter('Sunday')">Su</button>
                 </div>
                 <div class="schedule-container col-sm-12">
                   <div class="schedule-header col-sm-12">
                     <div class="col-sm-3">
                       DAY
                     </div>
                     <div class="col-sm-3">
                       OPEN
                     </div>
                     <div class="col-sm-3">
                       CLOSE
                     </div>
                   </div>
                   <div class="schedule-box col-sm-12" ng-repeat="day in tap.schedule | filter: scheduleFilterDay">
                     <div class="time-cell">
                       <div class="col-sm-3 ">
                         {{day.day}}
                       </div>
                       <div class="col-sm-3 ">
                         {{day.open}}
                       </div>
                       <div class="col-sm-3 ">
                         {{day.close}}
                       </div>
                       <button type="button" class="close crud-button"><i class="fa fa-times-circle"></i></button>
                       <button type="button" class="close crud-button"><i class="fa fa-pencil"></i></button>
                     </div>
                   </div>
                   <button class="col-sm-10 col-sm-offset-1 btn btn-danger add-time" type="button" name="button">Add New Time Period</button>
                 </div>
              </div>
              <div class="modal-footer modal-override">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="override-confirmation-modal-{{tap.id}}" tabindex="-1" aria-labeledby="override-confirmation-modal-{{tap.id}}-label" aria-hidden="true" style="display:none;">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal-{{tap.id}}-label">Confirm Override</h4>
              </div>
              <div class="modal-body">
                 <div class="form-group">
                   <label for=""></label>
                   <input type="text" class="form-control" id="" placeholder="">
                 </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
</div>
